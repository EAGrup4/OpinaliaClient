<script src="detailProduct.component.ts"></script>
<div class="container">
  <div class="back">
    <a class="btn btn-default" (click)="goBack()">< Atrás</a>
  </div>
  <div class="row imageForm">
    <div class="col-md-4">
      <div class="image">
        <img src="/assets/images/predet.png" width="80%" height="80%">
      </div>
    </div>
    <div class="col-md-4 putMarginBot">
      <div id="text">
        <h1>{{ this.producte.name }}</h1>
        <h3>{{ this.producte.category }} - {{ this.producte.company }}</h3>
      </div>
      <div class="col-md-6 specifications">
        <div class="icons" *ngIf="spec1">
          <img src="../../../assets/images/iconsStadistics/cpu.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specProcesador }}</span>
        </div>
        <div class="icons" *ngIf="spec2">
          <img src="../../../assets/images/iconsStadistics/pantalla.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specPantalla }}"</span>
        </div>
        <div class="icons" *ngIf="spec3">
          <img src="../../../assets/images/iconsStadistics/ram.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specRam }} GB</span>
        </div>
        <div class="icons" *ngIf="spec4">
          <img src="../../../assets/images/iconsStadistics/disc.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specDisco }} GB</span>
        </div>
      </div>
      <div class="col-md-6 specifications">
        <div class="icons" *ngIf="spec5">
          <img src="../../../assets/images/iconsStadistics/camara.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specCamara }} Mpx</span>
        </div>
        <div class="icons" *ngIf="spec6">
          <img src="../../../assets/images/iconsStadistics/grams.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specPeso }} gr</span>
        </div>
        <div class="icons" *ngIf="spec7">
          <img src="../../../assets/images/iconsStadistics/graphicTarget.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specTarjetaGrafica }}</span>
        </div>
        <div class="icons" *ngIf="spec8">
          <img src="../../../assets/images/iconsStadistics/so.png" height="20%" width="20%"/>
          <span class="iconsName">{{ this?.specSo }}</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-6 rating">
      <div class="averageRating">
        {{ this.producte.avgRate }}
      </div>
      <div class="rating-bar">
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getAvgRate()>
          </div>
        </div>
      </div>
      <button class="btn btn-default btn-block" (click)="scrollElement(opinion)">Escribir una opinion</button>
    </div>
  </div>
  <h2 style="padding-bottom: 1%" #opinion>Resumen:</h2>
    <div class="row summaryForm">
      <div class="col-md-6 col-sm-6">
        <div class="col-md-2 opRate">9-10:</div>
        <div class="col-md-6 summaryRating-bar">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getSummaryRate(this.opinions9)>
            </div>
          </div>
        </div>
        <div class="col-md-2 sumRate">{{ this.opinions9 }}</div>
        <div class="col-md-2 opRate">7-8:</div>
        <div class="col-md-6 summaryRating-bar">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getSummaryRate(this.opinions7)>
            </div>
          </div>
        </div>
        <div class="col-md-2 sumRate">{{ this.opinions7 }}</div>
        <div class="col-md-2 opRate">5-6:</div>
        <div class="col-md-6 summaryRating-bar">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getSummaryRate(this.opinions5)>
            </div>
          </div>
        </div>
        <div class="col-md-2 sumRate">{{ this.opinions5 }}</div>
        <div class="col-md-2 opRate">3-4:</div>
        <div class="col-md-6 summaryRating-bar">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getSummaryRate(this.opinions3)>
            </div>
          </div>
        </div>
        <div class="col-md-2 sumRate">{{ this.opinions3 }}</div>
        <div class="col-md-2 opRate">0-2:</div>
        <div class="col-md-6 summaryRating-bar">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getSummaryRate(this.opinions0)>
            </div>
          </div>
        </div>
        <div class="col-md-2 sumRate">{{ this.opinions0 }}</div>
      </div>
    </div>

  <p *ngFor="let alert of alerts" id="alertType">
    <ngb-alert [type]="alert.type" (close)="closeAlert(alert)">{{ alert.message }}</ngb-alert>
  </p>
  <h2 style="padding-bottom: 1%" #opinion>Escribir una opinion:</h2>
  <div class="row opinionForm">
    <div class="col-md-8 col-sm-6">
      <div class="opinionTitle">
        <label for="titulo">Título:</label>
        <input type="text" class="form-control" id="titulo" placeholder="Escribe aqui el título" #title>
      </div>
    </div>
    <div class="col-md-4 col-sm-6 ratingMarkForm">
      <div id="ratingMark">
        {{this.chVal}}
      </div>
      <div class="rating-bar">
        <input type="range" min="0" max="10" class="slider" id="myRange" [(ngModel)]="chVal" #mark>
      </div>
    </div>
    <div class="col-sm-4 comment">
      <label for="comentario2">Comentario:</label>
      <textarea class="form-control" rows="3" id="comentario2" placeholder="Escribe aqui tu comentario" #comment></textarea>
    </div>
    <div class="col-md-4">
      <div id="ratingButton">
          <button class="btn btn-default" (click)="sendComments(title.value, comment.value, mark.value)">Escribir una opinion</button>
      </div>
    </div>
  </div>
    <h2 style="padding-top: 2%">Opiniones:</h2>
    <h6 style="color: #666666; padding-left: 1.5%; padding-bottom: 0.5%">Nº de opiniones: {{this.numb}}</h6>
  <div class="row opinionsForm" *ngFor="let rates of this.producte.ratings | slice:0:10">
    <div class="col-md-6 col-sm-6">
      <div class="opinionTitle">
        <div class="opTitile">
          <h3>{{ rates.title }}</h3>
        </div>
        <div class="opComment">
          <h5>{{ rates.comment }}</h5>
        </div>
      </div>
    </div>
    <div class="col-md-4 rating">
      <div class="opRate">
        {{ rates.rate}}
      </div>
      <div class="opRating-bar">
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getRate(rates.rate)>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="writtenBy">
        <h4>{{ rates.userId?.name }}</h4>
      </div>
      <div class="rateDate">
      {{ rates.date | date: 'longDate'}}
      </div>
    </div>
  </div>
</div>

