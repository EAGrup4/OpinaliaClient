<script src="detailProduct.component.ts"></script>
<div class="container">
  <div class="back">
    <a class="btn btn-default" (click)="goBack()">< Atrás</a>
  </div>
  <div class="row imageForm" *ngFor="let prod of product">
    <div class="col-md-4">
      <div class="image">
        <img src="/assets/images/predet.png" width="80%" height="80%">
      </div>
    </div>
    <div class="col-md-4 putMarginBot">
      <div id="text">
        <h1>{{ prod.name }}</h1>
        <h3>{{ prod.category }} - {{ prod.company }}</h3>
      </div>
    </div>
    <div class="col-md-4 col-sm-6 rating">
      <div class="averageRating">
        {{ prod.avgRate }}
      </div>
      <div class="rating-bar">
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getAvgRate()>
          </div>
        </div>
      </div>
      <button class="btn btn-default btn-block" (click)="scrollElement(opinion)">Escribir una opinion</button>
    </div>
  </div>
  <h2 style="padding-bottom: 1%" #opinion>Escribir una opinion:</h2>
  <div class="row opinionForm">
    <div class="col-md-8 col-sm-6">
      <div class="opinionTitle">
        <label for="titulo">Título:</label>
        <input type="text" class="form-control" id="titulo" placeholder="Escribe aqui el título" #title>
      </div>
    </div>
    <div class="col-md-4 col-sm-6 ratingMarkForm">
      <div id="ratingMark">
        {{this.chVal}}
      </div>
      <div class="rating-bar">
        <input type="range" min="0" max="10" class="slider" id="myRange" [(ngModel)]="chVal">
      </div>
    </div>
    <div class="col-sm-4 comment">
      <label for="comentario">Comentario:</label>
      <textarea class="form-control" rows="3" id="comentario" placeholder="Escribe aqui tu comentario"></textarea>
    </div>
    <div class="col-md-4">
      <div id="ratingButton">
          <button class="btn btn-default">Escribir una opinion</button>
      </div>
    </div>
  </div>
    <h2 style="padding-top: 2%">Opiniones:</h2>
    <h6 style="color: #666666">(Nº de opiniones: {{prod.numRates}})</h6>
  <div class="row opinionsForm" *ngFor="let rating of prod.ratings | slice:7:15">
    <div class="col-md-6 col-sm-6">
      <div class="opinionTitle">
        <div class="writtenBy">
          <h4>Escrita por: {{ rating.userId.name }}</h4>
        </div>
        <div class="opTitile">
          <h3>TITULO</h3>
        </div>
        <div class="opComment">
          <h5>{{ rating.comment }}</h5>
        </div>
      </div>
    </div>
    <div class="col-md-4 rating">
      <div class="opRate">
        {{ rating.rate}}
      </div>
      <div class="opRating-bar">
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="10" [style.width]= getRate(rating.rate)>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      {{ rating.date }}
    </div>
  </div>
</div>

